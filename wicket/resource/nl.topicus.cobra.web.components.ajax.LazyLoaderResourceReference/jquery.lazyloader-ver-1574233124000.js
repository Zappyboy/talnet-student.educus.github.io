(function(a){a.fn.lazyloader=function(g){var j={fetchAtLoad:true,triggerOffset:500},h=this,e=false,c=false,i;a.extend(j,g);function b(){if(!c&&!e){e=true;h.serverCall({method:"fetch",args:[],success:function(k){c=c||k;e=false;if(c){h.hide()}else{d()}}})}}function d(){var l=i.scrollTop(),m=i.height(),k=i.get(0).scrollHeight||a("html").get(0).scrollHeight;if(k-(l+m)<j.triggerOffset){b()}}function f(k){if(k.get(0)===document){return a(window)}if(k.css("overflow")=="scroll"||k.css("overflow")=="auto"||k.css("overflow-y")=="scroll"||k.css("overflow-y")=="auto"){return k}return f(k.parent())}i=f(h);i.on("scroll",d);a(window).on("resize",function(){i=f(h);d()});a(window).on("click",d);if(j.fetchAtLoad){b()}}})(jQuery);